<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>仓库 | 一键虚拟化项目</title>
    <meta name="description" content="开源、易于使用的服务器虚拟化项目">
    <link rel="stylesheet" href="/assets/style.0b9f658b.css">
    <link rel="modulepreload" href="/assets/chunks/AlgoliaSearchBox.381679cc.js">
    <link rel="modulepreload" href="/assets/app.8fc4a373.js">
    <link rel="modulepreload" href="/assets/case_case1.md.f89adc73.lean.js">
    
    <meta name="twitter:title" content="仓库 | 一键虚拟化项目">
  <meta property="og:title" content="仓库 | 一键虚拟化项目">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="一键虚拟化项目, back to home" data-v-675d8756 data-v-cc01ef16><!----> 一键虚拟化项目</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/" data-v-b8818f8c>一键虚拟化 <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item active" href="/case/index" data-v-b8818f8c>Linux相关 <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/developer/index" data-v-b8818f8c>开发手册 <!----></a></div></div><!--]--><div class="item" data-v-eab3edfe><div class="nav-dropdown-link" data-v-eab3edfe data-v-56bf3a3f><button class="button" data-v-56bf3a3f><span class="button-text" data-v-56bf3a3f>Languages</span><span class="right button-arrow" data-v-56bf3a3f></span></button><ul class="dialog" data-v-56bf3a3f><!--[--><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item active" href="/case/case1.html" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>简体中文</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/en_US/case/case1.html" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>English</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/oneclickvirt/oneclickvirt.github.io" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--[--><div class="algolia-search-box" id="docsearch"></div><!--]--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/" data-v-b8818f8c>一键虚拟化 <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item active" href="/case/index" data-v-b8818f8c>Linux相关 <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/developer/index" data-v-b8818f8c>开发手册 <!----></a></div></div><!--]--><div class="item" data-v-eab3edfe><div class="nav-dropdown-link" data-v-eab3edfe data-v-56bf3a3f><button class="button" data-v-56bf3a3f><span class="button-text" data-v-56bf3a3f>Languages</span><span class="right button-arrow" data-v-56bf3a3f></span></button><ul class="dialog" data-v-56bf3a3f><!--[--><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item active" href="/case/case1.html" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>简体中文</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/en_US/case/case1.html" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>English</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/oneclickvirt/oneclickvirt.github.io" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><p class="sidebar-link-item">Linux相关</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item active" href="/case/case1">1. 一键修复与安装脚本(各种linux系统修复与服务器环境安装脚本)</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#前言">前言</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#目录">目录</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#一键修复脚本">一键修复脚本</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#一键环境安装脚本">一键环境安装脚本</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#部分手动命令">部分手动命令</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#一键开启root登陆并替换密码">一键开启root登陆并替换密码</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#一键屏蔽邮件端口避免被恶意程序使用">一键屏蔽邮件端口避免被恶意程序使用</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#设置语言包">设置语言包</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ubuntu更新源被锁">ubuntu更新源被锁</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#debian缺失公钥">debian缺失公钥</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ubuntu或debian缺失公钥">ubuntu或debian缺失公钥</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#centos换源">centos换源</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#安装gitea">安装gitea</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#卸载aapanel">卸载aapanel</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#安装docker和docker-compose">安装docker和docker-compose</a><!----></li></ul></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/case/case2">2. VPS融合怪服务器测评脚本</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/case/case3">3. 自动更新测试服务器节点列表的网络基准测试脚本</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/case/case4">4. 甲骨文服务器保活脚本</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/case/case5">5. convoy面板安装脚本</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="仓库" tabindex="-1">仓库 <a class="header-anchor" href="#仓库" aria-hidden="true">#</a></h1><p><a href="https://github.com/spiritLHLS/one-click-installation-script" target="_blank" rel="noopener noreferrer">https://github.com/spiritLHLS/one-click-installation-script</a></p><h2 id="前言" tabindex="-1">前言 <a class="header-anchor" href="#前言" aria-hidden="true">#</a></h2><p>所有脚本如需在国内服务器使用，请在链接前加上<code>https://ghproxy.com/</code>确保命令可以下载本仓库的shell脚本执行</p><h2 id="目录" tabindex="-1">目录 <a class="header-anchor" href="#目录" aria-hidden="true">#</a></h2><ul><li><a href="#%E4%B8%80%E9%94%AE%E4%BF%AE%E5%A4%8D%E8%84%9A%E6%9C%AC">一键修复脚本</a><ul><li><a href="#%E4%B8%80%E9%94%AE%E5%B0%9D%E8%AF%95%E4%BF%AE%E5%A4%8Dapt%E6%BA%90">一键尝试修复apt源</a></li><li><a href="#%E4%B8%80%E9%94%AE%E5%B0%9D%E8%AF%95%E4%BF%AE%E5%A4%8D%E7%B3%BB%E7%BB%9F%E6%97%B6%E9%97%B4">一键尝试修复系统时间</a></li><li><a href="#%E4%B8%80%E9%94%AE%E5%B0%9D%E8%AF%95%E4%BF%AE%E5%A4%8Dsudo%E8%AD%A6%E5%91%8A">一键尝试修复sudo警告</a></li><li><a href="#%E4%B8%80%E9%94%AE%E4%BF%AE%E6%94%B9%E7%B3%BB%E7%BB%9F%E8%87%AA%E5%B8%A6%E7%9A%84journal%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%95%E5%A4%A7%E5%B0%8F%E9%87%8A%E6%94%BE%E7%B3%BB%E7%BB%9F%E7%9B%98%E7%A9%BA%E9%97%B4">一键修改系统自带的journal日志记录大小释放系统盘空间</a></li><li><a href="#%E4%B8%80%E9%94%AE%E5%B0%9D%E8%AF%95%E4%BF%AE%E5%A4%8D%E7%BD%91%E7%BB%9C">一键尝试修复网络</a></li></ul></li><li><a href="#%E4%B8%80%E9%94%AE%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC">一键环境安装脚本</a><ul><li><a href="#%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85jupyter%E7%8E%AF%E5%A2%83">一键安装jupyter环境</a></li><li><a href="#%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85R%E8%AF%AD%E8%A8%80%E7%8E%AF%E5%A2%83">一键安装R语言环境</a></li><li><a href="#%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85rust%E7%8E%AF%E5%A2%83">一键安装rust环境</a></li><li><a href="#%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85C%E7%8E%AF%E5%A2%83">一键安装C++环境</a></li><li><a href="#%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85vnstat%E7%8E%AF%E5%A2%83">一键安装vnstat环境</a></li><li><a href="#%E4%B8%80%E9%94%AE%E5%8D%87%E7%BA%A7%E4%BD%8E%E7%89%88%E6%9C%ACdebian%E4%B8%BAdebian11">一键升级低版本debian为debian11</a></li><li><a href="#%E4%B8%80%E9%94%AE%E5%8D%87%E7%BA%A7%E4%BD%8E%E7%89%88%E6%9C%ACubuntu%E4%B8%BAubuntu22">一键升级低版本ubuntu为ubuntu22</a></li><li><a href="#%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85zipline%E5%B9%B3%E5%8F%B0">一键安装zipline平台</a></li><li><a href="#%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85filebrowser%E5%B9%B3%E5%8F%B0">一键安装filebrowser平台</a></li><li><a href="#%E4%B8%80%E9%94%AE%E5%88%A0%E9%99%A4%E5%B9%B3%E5%8F%B0%E7%9B%91%E6%8E%A7">一键删除平台监控</a></li></ul></li><li><a href="#%E9%83%A8%E5%88%86%E6%89%8B%E5%8A%A8%E5%91%BD%E4%BB%A4">部分手动命令</a><ul><li><a href="#%E4%B8%80%E9%94%AE%E5%BC%80%E5%90%AFroot%E7%99%BB%E9%99%86%E5%B9%B6%E6%9B%BF%E6%8D%A2%E5%AF%86%E7%A0%81">一键开启root登陆并替换密码</a></li><li><a href="#%E4%B8%80%E9%94%AE%E5%B1%8F%E8%94%BD%E9%82%AE%E4%BB%B6%E7%AB%AF%E5%8F%A3%E9%81%BF%E5%85%8D%E8%A2%AB%E6%81%B6%E6%84%8F%E7%A8%8B%E5%BA%8F%E4%BD%BF%E7%94%A8">一键屏蔽邮件端口避免被恶意程序使用</a></li><li><a href="#%E8%AE%BE%E7%BD%AE%E8%AF%AD%E8%A8%80%E5%8C%85">设置语言包</a></li><li><a href="#ubuntu%E6%9B%B4%E6%96%B0%E6%BA%90%E8%A2%AB%E9%94%81">ubuntu更新源被锁</a></li><li><a href="#debian%E7%BC%BA%E5%A4%B1%E5%85%AC%E9%92%A5">debian缺失公钥</a></li><li><a href="#ubuntu%E6%88%96debian%E7%BC%BA%E5%A4%B1%E5%85%AC%E9%92%A5">ubuntu或debian缺失公钥</a></li><li><a href="#centos%E6%8D%A2%E6%BA%90">centos换源</a></li><li><a href="#%E5%AE%89%E8%A3%85gitea">安装gitea</a></li><li><a href="#%E5%8D%B8%E8%BD%BDaapanel">卸载aapanel</a></li><li><a href="#%E5%AE%89%E8%A3%85docker%E5%92%8Cdocker-compose">安装docker和docker-compose</a></li></ul></li></ul><h2 id="一键修复脚本" tabindex="-1">一键修复脚本 <a class="header-anchor" href="#一键修复脚本" aria-hidden="true">#</a></h2><p>运行所有一键修复脚本前注意看说明，以及保证服务器无重要数据，运行后造成的一切后果作者不负任何责任，自行评判风险！</p><h4 id="一键尝试修复apt源" tabindex="-1">一键尝试修复apt源 <a class="header-anchor" href="#一键尝试修复apt源" aria-hidden="true">#</a></h4><ul><li>支持系统：Ubuntu 12+，Debian 6+</li><li>修复apt下载包进程意外退出导致的源锁死</li><li>修复apt源broken损坏</li><li>修复apt源多进程占用锁死</li><li>修复apt源公钥缺失</li><li>修复替换系统可用的apt源列表，国内用阿里源，国外用官方源</li><li>修复本机的Ubuntu系统是EOL非长期维护的版本(奇数或陈旧的偶数版本)，将替换为Ubuntu官方的old-releases仓库以支持apt的使用</li><li>修复只保证<code>apt update</code>不会报错，其他命令报错未修复</li><li>如若修复后install还有问题，重启服务器解决问题</li></ul><div class="language-bash"><pre><code><span class="token function">curl</span> -L https://raw.githubusercontent.com/spiritLHLS/one-click-installation-script/main/repair_scripts/package.sh -o package.sh <span class="token operator">&amp;&amp;</span> <span class="token function">chmod</span> +x package.sh <span class="token operator">&amp;&amp;</span> <span class="token function">bash</span> package.sh
</code></pre></div><h4 id="一键尝试修复系统时间" tabindex="-1">一键尝试修复系统时间 <a class="header-anchor" href="#一键尝试修复系统时间" aria-hidden="true">#</a></h4><ul><li>支持系统：Ubuntu 18+，Debian 8+，centos 7+，Fedora，Almalinux 8.5+</li><li>由于系统时间不准确都是未进行时区时间同步造成的，使用chronyd进行时区时间同步后应当解决了问题</li></ul><div class="language-bash"><pre><code><span class="token function">curl</span> -L https://raw.githubusercontent.com/spiritLHLS/one-click-installation-script/main/repair_scripts/modify_time.sh -o modify_time.sh <span class="token operator">&amp;&amp;</span> <span class="token function">chmod</span> +x modify_time.sh <span class="token operator">&amp;&amp;</span> <span class="token function">bash</span> modify_time.sh
</code></pre></div><h4 id="一键尝试修复sudo警告" tabindex="-1">一键尝试修复sudo警告 <a class="header-anchor" href="#一键尝试修复sudo警告" aria-hidden="true">#</a></h4><ul><li>一键尝试修复<code>sudo: unable to resolve host xxx: Name or service not known</code>警告(爆错)</li></ul><p>不要在生产环境上使用该脚本，否则容易造成网络hosts配置错误，配置的host名字不在外网IP上反而在内网IP(127.0.0.1)上</p><div class="language-bash"><pre><code><span class="token function">curl</span> -L https://raw.githubusercontent.com/spiritLHLS/one-click-installation-script/main/repair_scripts/check_sudo.sh -o check_sudo.sh <span class="token operator">&amp;&amp;</span> <span class="token function">chmod</span> +x check_sudo.sh <span class="token operator">&amp;&amp;</span> <span class="token function">bash</span> check_sudo.sh
</code></pre></div><h4 id="一键修改系统自带的journal日志记录大小释放系统盘空间" tabindex="-1">一键修改系统自带的journal日志记录大小释放系统盘空间 <a class="header-anchor" href="#一键修改系统自带的journal日志记录大小释放系统盘空间" aria-hidden="true">#</a></h4><ul><li>支持系统：Ubuntu 18+，Debian 8+，centos 7+，Fedora，Almalinux 8.5+</li><li>1.自定义修改大小，单位为MB，一般500或者1000即可，有的系统日志默认给了5000甚至更多，不是做站啥的没必要 <ul><li>请注意，修改journal目录大小会影响系统日志的记录，因此，在修改journal目录大小之前如果需要之前的日志，建议先备份系统日志到本地</li></ul></li><li>2.自定义修改设置系统日志保留日期时长，超过日期时长的日志将被清除</li><li>3.默认修改日志只记录warning等级(无法自定义)</li><li>4.以后日志的产生将受到日志文件大小，日志保留时间，日志保留等级的限制</li></ul><div class="language-bash"><pre><code><span class="token function">curl</span> -L https://raw.githubusercontent.com/spiritLHLS/one-click-installation-script/main/repair_scripts/resize_journal.sh -o resize_journal.sh <span class="token operator">&amp;&amp;</span> <span class="token function">chmod</span> +x resize_journal.sh <span class="token operator">&amp;&amp;</span> <span class="token function">bash</span> resize_journal.sh
</code></pre></div><h4 id="一键尝试修复网络" tabindex="-1">一键尝试修复网络 <a class="header-anchor" href="#一键尝试修复网络" aria-hidden="true">#</a></h4><p><strong>该脚本轻易勿要使用，请确保运行时服务器无重要文件或程序，出现运行bug后续可能需要重装系统</strong></p><p><strong>一定要在screen中执行该脚本，否则可能导致修改过程中ssh断链接而修改失败卡住最终SSH无法连接！不在screen中执行后果自负！</strong></p><ul><li>支持系统：Ubuntu 18+，Debian 8+，centos 7+，Fedora，Almalinux 8.5+</li><li>尝试修复nameserver为google源或cloudflare源</li><li>尝试修复为IP类型对应的网络优先级(默认IPV4类型，纯V6类型再替换为IPV6类型)</li></ul><div class="language-bash"><pre><code><span class="token function">curl</span> -L https://cdn.spiritlhl.workers.dev/https://raw.githubusercontent.com/spiritLHLS/one-click-installation-script/main/repair_scripts/network.sh -o network.sh <span class="token operator">&amp;&amp;</span> <span class="token function">chmod</span> +x network.sh <span class="token operator">&amp;&amp;</span> <span class="token function">bash</span> network.sh
</code></pre></div><p>如果是纯V6的也可以不使用上面脚本的nat64，使用warp添加V4网络</p><p>比如：<a href="https://github.com/fscarmen/warp" target="_blank" rel="noopener noreferrer">https://github.com/fscarmen/warp</a></p><div class="language-bash"><pre><code><span class="token function">wget</span> -N https://raw.githubusercontent.com/fscarmen/warp/main/menu.sh <span class="token operator">&amp;&amp;</span> <span class="token function">bash</span> menu.sh <span class="token punctuation">[</span>option<span class="token punctuation">]</span> <span class="token punctuation">[</span>lisence<span class="token punctuation">]</span>
</code></pre></div><p>非纯V6的，带V4切换优先级到IPV4可用以下命令</p><div class="language-bash"><pre><code><span class="token function">sudo</span> <span class="token function">sed</span> -i <span class="token string">&#39;s/.*precedence ::ffff:0:0\/96.*/precedence ::ffff:0:0\/96  100/g&#39;</span> /etc/gai.conf <span class="token operator">&amp;&amp;</span> <span class="token function">sudo</span> systemctl restart networking
</code></pre></div><h2 id="一键环境安装脚本" tabindex="-1">一键环境安装脚本 <a class="header-anchor" href="#一键环境安装脚本" aria-hidden="true">#</a></h2><p>只推荐在新服务器上安装，环境不纯净不保证不出bug</p><p>运行所有一键环境安装脚本前注意看说明，以及保证服务器无重要数据，运行后造成的一切后果作者不负任何责任，自行评判风险！</p><h4 id="一键安装jupyter环境" tabindex="-1">一键安装jupyter环境 <a class="header-anchor" href="#一键安装jupyter环境" aria-hidden="true">#</a></h4><ul><li><strong>本脚本尝试使用Miniconda3安装虚拟环境jupyter-env再进行jupyter和jupyterlab的安装，如若安装机器不纯净勿要轻易使用本脚本！</strong></li><li><strong>本脚本为实验性脚本可能会有各种bug，勿要轻易尝试！</strong></li><li><strong>安装前需要保证 sudo wget curl 已安装</strong></li><li>验证已支持的系统： <ul><li>Ubuntu 18/20/22 - 推荐，脚本自动挂起到后台</li><li>Debian 9/10/11 - 还行，需要手动挂起到后台，详看脚本运行安装完毕的后续提示</li></ul></li><li>可能支持的系统(未验证)：centos 7+，Fedora，Almalinux 8.5+</li><li>执行脚本，之前有用本脚本安装过则直接打印设置的登陆信息，没安装过则进行安装再打印信息，如果已安装但未启动则自动启动后再打印信息</li><li>如果是初次安装无脑输入y回车即可，按照提示进行操作即可，安装完毕将在后台常驻运行</li><li>安装完毕后，如果需要在lab中安装第三方库需要在lab中使用terminal并使用conda进行下载而不是pip下载，这是需要注意的</li></ul><p>原始用途是方便快捷的在按小时计费的超大型服务器上部署python环境进行科学计算，充分利用时间别浪费在构建环境上。</p><div class="language-bash"><pre><code><span class="token function">curl</span> -L https://raw.githubusercontent.com/spiritLHLS/one-click-installation-script/main/install_scripts/jupyter.sh -o jupyter.sh <span class="token operator">&amp;&amp;</span> <span class="token function">chmod</span> +x jupyter.sh <span class="token operator">&amp;&amp;</span> <span class="token function">bash</span> jupyter.sh
</code></pre></div><p>安装后记得开放 13692 端口</p><div class="language-bash"><pre><code><span class="token function">apt</span> <span class="token function">install</span> ufw -y
ufw allow <span class="token number">13692</span>
</code></pre></div><h4 id="一键安装r语言环境" tabindex="-1">一键安装R语言环境 <a class="header-anchor" href="#一键安装r语言环境" aria-hidden="true">#</a></h4><ul><li><strong>安装前需使用Miniconda3安装虚拟环境jupyter-env，然后进行jupyter和jupyterlab的安装，再然后才能安装本内核</strong></li><li><strong>简单的说，需要执行本仓库对应的jupyter安装脚本再运行本脚本安装R语言环境，会自动安装R环境内核和图形设备支持库</strong></li><li>x11可能需要手动启动一下，执行<code>sudo /usr/bin/Xorg</code></li><li>可能支持的系统(未验证)：centos 7+，Fedora，Almalinux 8.5+</li></ul><div class="language-bash"><pre><code><span class="token function">curl</span> -L https://raw.githubusercontent.com/spiritLHLS/one-click-installation-script/main/install_scripts/R.sh -o R.sh <span class="token operator">&amp;&amp;</span> <span class="token function">chmod</span> +x R.sh <span class="token operator">&amp;&amp;</span> <span class="token function">bash</span> R.sh
</code></pre></div><h4 id="一键安装rust环境" tabindex="-1">一键安装rust环境 <a class="header-anchor" href="#一键安装rust环境" aria-hidden="true">#</a></h4><ul><li>支持系统：Ubuntu 18+，Debian 8+，centos 7+，Fedora，Almalinux 8.5+</li><li>加载官方脚本安装，前置条件适配系统以及后置条件判断安装的版本</li></ul><div class="language-bash"><pre><code><span class="token function">curl</span> -L https://raw.githubusercontent.com/spiritLHLS/one-click-installation-script/main/install_scripts/rust.sh -o rust.sh <span class="token operator">&amp;&amp;</span> <span class="token function">chmod</span> +x rust.sh <span class="token operator">&amp;&amp;</span> <span class="token function">bash</span> rust.sh 
</code></pre></div><h4 id="一键安装c环境" tabindex="-1">一键安装C环境 <a class="header-anchor" href="#一键安装c环境" aria-hidden="true">#</a></h4><ul><li>一键安装C++环境</li><li>支持系统：使用apt或者yum作为包管理器的系统</li><li>如果未安装则安装，如果有安装则提示升级</li></ul><div class="language-bash"><pre><code><span class="token function">curl</span> -L https://raw.githubusercontent.com/spiritLHLS/one-click-installation-script/main/install_scripts/cplusplus.sh -o cplusplus.sh <span class="token operator">&amp;&amp;</span> <span class="token function">chmod</span> +x cplusplus.sh <span class="token operator">&amp;&amp;</span> <span class="token function">bash</span> cplusplus.sh 
</code></pre></div><h4 id="一键安装vnstat环境" tabindex="-1">一键安装vnstat环境 <a class="header-anchor" href="#一键安装vnstat环境" aria-hidden="true">#</a></h4><ul><li>支持系统：Ubuntu 18+，Debian 8+，centos 7+，Fedora，Almalinux 8.5+</li><li>加载官方文件编译安装，前置条件适配系统以及后置条件判断安装的版本</li></ul><div class="language-bash"><pre><code><span class="token function">curl</span> -L https://raw.githubusercontent.com/spiritLHLS/one-click-installation-script/main/install_scripts/vnstat.sh -o vnstat.sh <span class="token operator">&amp;&amp;</span> <span class="token function">chmod</span> +x vnstat.sh <span class="token operator">&amp;&amp;</span> <span class="token function">bash</span> vnstat.sh 
</code></pre></div><h4 id="一键升级低版本debian为debian11" tabindex="-1">一键升级低版本debian为debian11 <a class="header-anchor" href="#一键升级低版本debian为debian11" aria-hidden="true">#</a></h4><ul><li>支持系统：debian 6+</li><li>升级后需要重启系统加载内核，升级过程中需要选择的都无脑按回车即可</li><li>升级是一个版本迭代一个版本，所以如果版本低，每执行一次升级一个版本，直至升级到debian11</li></ul><div class="language-bash"><pre><code><span class="token function">curl</span> -L https://raw.githubusercontent.com/spiritLHLS/one-click-installation-script/main/install_scripts/todebian11.sh -o todebian11.sh <span class="token operator">&amp;&amp;</span> <span class="token function">chmod</span> +x todebian11.sh <span class="token operator">&amp;&amp;</span> <span class="token function">bash</span> todebian11.sh
</code></pre></div><h4 id="一键升级低版本ubuntu为ubuntu22" tabindex="-1">一键升级低版本ubuntu为ubuntu22 <a class="header-anchor" href="#一键升级低版本ubuntu为ubuntu22" aria-hidden="true">#</a></h4><ul><li>支持系统：Ubuntu 16+</li><li>升级后需要重启系统加载内核，升级过程中需要选择的都无脑按回车即可</li><li>升级是一个版本迭代一个版本，所以如果版本低，每执行一次升级一个版本，直至升级到ubuntu22</li></ul><div class="language-bash"><pre><code><span class="token function">curl</span> -L https://raw.githubusercontent.com/spiritLHLS/one-click-installation-script/main/install_scripts/toubuntu22.sh -o toubuntu22.sh <span class="token operator">&amp;&amp;</span> <span class="token function">chmod</span> +x toubuntu22.sh <span class="token operator">&amp;&amp;</span> <span class="token function">bash</span> toubuntu22.sh
</code></pre></div><h4 id="一键安装zipline平台" tabindex="-1">一键安装zipline平台 <a class="header-anchor" href="#一键安装zipline平台" aria-hidden="true">#</a></h4><ul><li>应该支持的系统：Ubuntu 18+，Debian 8+，centos 7+，Fedora，Almalinux 8.5+</li><li>暂时只在Ubuntu上验证无问题</li><li>如若要设置反向代理绑定域名，安装前请保证原服务器未安装过nginx，如若已安装过nginx，请自行配置反向代理本机的3000端口</li><li>默认一路回车是不启用反代不安装nginx的，自行选择，如需通过本脚本配置反代系统一定要未安装过nginx并在填写y或Y开启安装</li><li><a href="https://github.com/diced/zipline" target="_blank" rel="noopener noreferrer">zipline</a> 平台功能: ShareX，自定义短链接，文件上传分享，多用户校验，高亮显示，阅后即焚，设置简单 (含pastebin)</li><li>自动安装docker，docker-compose，如若已安装zipline在/root目录下，则自动更新</li><li>反向代理如若已设置成功，还需要在面板设置中填写域名，绑定启用</li></ul><div class="language-bash"><pre><code><span class="token function">curl</span> -L https://raw.githubusercontent.com/spiritLHLS/one-click-installation-script/main/install_scripts/zipline.sh -o zipline.sh <span class="token operator">&amp;&amp;</span> <span class="token function">chmod</span> +x zipline.sh <span class="token operator">&amp;&amp;</span> <span class="token function">bash</span> zipline.sh
</code></pre></div><p>如果需要删除0字节文件，打开<code>/root/zipline</code>文件夹，执行</p><div class="language-"><pre><code>docker-compose exec zipline yarn scripts:clear-zero-byte
</code></pre></div><p>按照提示操作</p><h4 id="一键安装filebrowser平台" tabindex="-1">一键安装filebrowser平台 <a class="header-anchor" href="#一键安装filebrowser平台" aria-hidden="true">#</a></h4><ul><li>端口设置为3030了，其他登陆信息详见提示</li><li><a href="https://github.com/filebrowser/filebrowser" target="_blank" rel="noopener noreferrer">filebrowser</a>平台支持下载上传文件到服务器，批量下载多个文件(自定义压缩格式)，构建文件分享链接，设置分享时长</li><li>如果本地有启用IPV6优先级可能绑定到V6去了，使用<code>lsof -i:3030</code>查看绑定情况，切换优先级后再安装就正常了</li></ul><div class="language-bash"><pre><code><span class="token function">curl</span> -L https://raw.githubusercontent.com/spiritLHLS/one-click-installation-script/main/install_scripts/filebrowser.sh -o filebrowser.sh <span class="token operator">&amp;&amp;</span> <span class="token function">chmod</span> +x filebrowser.sh <span class="token operator">&amp;&amp;</span> <span class="token function">bash</span> filebrowser.sh
</code></pre></div><h4 id="一键删除平台监控" tabindex="-1">一键删除平台监控 <a class="header-anchor" href="#一键删除平台监控" aria-hidden="true">#</a></h4><ul><li>一键移除大多数云服务器监控</li><li>涵盖阿里云、腾讯云、华为云、UCLOUD、甲骨文云、京东云</li></ul><div class="language-bash"><pre><code><span class="token function">curl</span> -L https://raw.githubusercontent.com/spiritLHLS/one-click-installation-script/main/install_scripts/dlm.sh -o dlm.sh <span class="token operator">&amp;&amp;</span> <span class="token function">chmod</span> +x dlm.shh <span class="token operator">&amp;&amp;</span> <span class="token function">bash</span> dlm.sh
</code></pre></div><h2 id="部分手动命令" tabindex="-1">部分手动命令 <a class="header-anchor" href="#部分手动命令" aria-hidden="true">#</a></h2><h3 id="一键开启root登陆并替换密码" tabindex="-1">一键开启root登陆并替换密码 <a class="header-anchor" href="#一键开启root登陆并替换密码" aria-hidden="true">#</a></h3><div class="language-"><pre><code>bash &lt;(curl -sSL https://raw.githubusercontent.com/fscarmen/tools/main/root.sh) [PASSWORD]
</code></pre></div><h3 id="一键屏蔽邮件端口避免被恶意程序使用" tabindex="-1">一键屏蔽邮件端口避免被恶意程序使用 <a class="header-anchor" href="#一键屏蔽邮件端口避免被恶意程序使用" aria-hidden="true">#</a></h3><div class="language-bash"><pre><code>iptables -A INPUT -p tcp --dport <span class="token number">25</span> -j DROP
iptables -A OUTPUT -p tcp --dport <span class="token number">25</span> -j DROP
/sbin/iptables-save
</code></pre></div><h3 id="设置语言包" tabindex="-1">设置语言包 <a class="header-anchor" href="#设置语言包" aria-hidden="true">#</a></h3><div class="language-bash"><pre><code><span class="token function">sudo</span> <span class="token function">apt-get</span> update
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> language-pack-en-base
<span class="token function">sudo</span> locale-gen en_US.UTF-8
</code></pre></div><p>下载UTF-8的环境，生成UTF-8的包，然后重启服务器</p><div class="language-bash"><pre><code>locale -a
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">LC_ALL</span></span><span class="token operator">=</span>en_US.UTF-8
</code></pre></div><p>查看并设置语言包</p><p>language-pack-en-base 在debian中好像没有，只有Ubuntu有好像，不知道是不是个例，有问题再说</p><h3 id="ubuntu更新源被锁" tabindex="-1">ubuntu更新源被锁 <a class="header-anchor" href="#ubuntu更新源被锁" aria-hidden="true">#</a></h3><div class="language-bash"><pre><code><span class="token function">sudo</span> <span class="token function">rm</span> -rf /var/cache/apt/archives/lock
<span class="token function">sudo</span> <span class="token function">pkill</span> <span class="token function">apt</span>
<span class="token function">sudo</span> <span class="token function">rm</span> /var/lib/dpkg/lock-frontend
<span class="token function">sudo</span> <span class="token function">rm</span> /var/lib/apt/lists/lock
<span class="token function">sudo</span> <span class="token function">rm</span> /var/cache/apt/archives/lock
<span class="token function">sudo</span> <span class="token function">rm</span> /var/lib/dpkg/lock
<span class="token function">sudo</span> dpkg --configure -a
</code></pre></div><p>然后重启系统</p><h3 id="debian缺失公钥" tabindex="-1">debian缺失公钥 <a class="header-anchor" href="#debian缺失公钥" aria-hidden="true">#</a></h3><div class="language-bash"><pre><code><span class="token function">apt-get</span> <span class="token function">install</span> debian-keyring debian-archive-keyring -y
</code></pre></div><h3 id="ubuntu或debian缺失公钥" tabindex="-1">ubuntu或debian缺失公钥 <a class="header-anchor" href="#ubuntu或debian缺失公钥" aria-hidden="true">#</a></h3><p>后续这块有计划整理为一个一键脚本</p><div class="language-bash"><pre><code><span class="token function">sudo</span> apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 公钥
</code></pre></div><h3 id="centos换源" tabindex="-1">centos换源 <a class="header-anchor" href="#centos换源" aria-hidden="true">#</a></h3><div class="language-bash"><pre><code><span class="token function">sudo</span> <span class="token function">cp</span> /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup
<span class="token function">sudo</span> <span class="token function">sed</span> -i <span class="token string">&#39;s/^mirrorlist=http/mirrorlist=https/&#39;</span> /etc/yum.repos.d/CentOS-Base.repo
</code></pre></div><h3 id="安装gitea" tabindex="-1">安装gitea <a class="header-anchor" href="#安装gitea" aria-hidden="true">#</a></h3><p>Ubuntu 20无问题，Ubuntu 22好像不行</p><p><a href="https://gitlab.com/packaging/gitea" target="_blank" rel="noopener noreferrer">https://gitlab.com/packaging/gitea</a></p><h3 id="卸载aapanel" tabindex="-1">卸载aapanel <a class="header-anchor" href="#卸载aapanel" aria-hidden="true">#</a></h3><div class="language-bash"><pre><code><span class="token function">apt</span> <span class="token function">install</span> sysv-rc-conf -y <span class="token operator">&amp;&amp;</span> <span class="token function">service</span> bt stop <span class="token operator">&amp;&amp;</span> sysv-rc-conf bt off <span class="token operator">&amp;&amp;</span> <span class="token function">rm</span> -f /etc/init.d/bt <span class="token operator">&amp;&amp;</span> <span class="token function">rm</span> -rf /www/server/panel
</code></pre></div><h3 id="安装docker和docker-compose" tabindex="-1">安装docker和docker-compose <a class="header-anchor" href="#安装docker和docker-compose" aria-hidden="true">#</a></h3><div class="language-bash"><pre><code><span class="token function">curl</span> -sSL https://get.docker.com/ <span class="token operator">|</span> <span class="token function">sh</span>
<span class="token function">curl</span> -L <span class="token string">&quot;https://github.com/docker/compose/releases/latest/download/docker-compose-linux-<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> -m<span class="token variable">)</span></span>&quot;</span> -o /usr/local/bin/docker-compose
<span class="token function">chmod</span> +x /usr/local/bin/docker-compose
<span class="token function">docker-compose</span> --version
</code></pre></div></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-07c132fc><div class="edit" data-v-07c132fc><div class="edit-link" data-v-07c132fc data-v-1ed99556><a class="link" href="https://github.com/oneclickvirt/oneclickvirt.github.io/edit/main/docs/case/case1.md" target="_blank" rel="noopener noreferrer" data-v-1ed99556>在GitHub中编辑 <svg class="icon outbound icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-1ed99556><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="updated" data-v-07c132fc><p class="last-updated" data-v-07c132fc data-v-abce3432><span class="prefix" data-v-abce3432>上次更新:</span><span class="datetime" data-v-abce3432></span></p></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><!----></div><div class="next" data-v-38ede35f><a class="link" href="/case/case2" data-v-38ede35f><span class="text" data-v-38ede35f>2. VPS融合怪服务器测评脚本</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"case_case1.md\":\"f89adc73\",\"case_case2.md\":\"1848c987\",\"case_case3.md\":\"405ef819\",\"case_case4.md\":\"ca168171\",\"case_case5.md\":\"3e3021ec\",\"case_index.md\":\"e75f6dbb\",\"developer_index.md\":\"b4e50f4c\",\"developer_l10n.md\":\"2494b175\",\"en_us_developer_index.md\":\"a50ff206\",\"en_us_developer_l10n.md\":\"8eed944e\",\"en_us_guide_dashboard.md\":\"17b934c2\",\"en_us_guide_dashboardq.md\":\"5ee94b59\",\"en_us_guide_docker_build.md\":\"cf15bfc6\",\"en_us_guide_docker_install.md\":\"d5758189\",\"en_us_guide_docker_precheck.md\":\"dc53e575\",\"en_us_guide_docker_qa.md\":\"8becf35e\",\"en_us_guide_docker_thanks.md\":\"41f52616\",\"en_us_guide_lxd_extra_config.md\":\"f8fac272\",\"en_us_guide_lxd_install.md\":\"1083554d\",\"en_us_guide_lxd_lxc.md\":\"941a3551\",\"en_us_guide_lxd_precheck.md\":\"e2d9109c\",\"en_us_guide_lxd_qa.md\":\"fa9d687d\",\"en_us_guide_lxd_thanks.md\":\"adff9152\",\"en_us_guide_pve_install.md\":\"cea892d9\",\"en_us_guide_pve_kvm.md\":\"d80f61c3\",\"en_us_guide_pve_lxc.md\":\"977fc2d0\",\"en_us_guide_pve_precheck.md\":\"9a1a39d4\",\"en_us_guide_pve_qa.md\":\"3a87ce0f\",\"en_us_guide_pve_thanks.md\":\"ff39cc8c\",\"en_us_index.md\":\"0eda7708\",\"guide_dashboard.md\":\"830772a8\",\"guide_dashboardq.md\":\"7d65992b\",\"guide_docker_build.md\":\"47637d24\",\"guide_docker_install.md\":\"8d995ec6\",\"guide_docker_precheck.md\":\"04033cf9\",\"guide_docker_qa.md\":\"ea767b7c\",\"guide_docker_thanks.md\":\"d7ee7c1b\",\"guide_lxd_extra_config.md\":\"c32f2396\",\"guide_lxd_install.md\":\"16da0e6a\",\"guide_lxd_lxc.md\":\"419f942f\",\"guide_lxd_precheck.md\":\"ee485a31\",\"guide_lxd_qa.md\":\"6f039b0e\",\"guide_lxd_thanks.md\":\"9e7ae8d5\",\"guide_pve_install.md\":\"da33ae80\",\"guide_pve_kvm.md\":\"70268bdf\",\"guide_pve_lxc.md\":\"06411d60\",\"guide_pve_precheck.md\":\"80d54d99\",\"guide_pve_qa.md\":\"b1ed4df8\",\"guide_pve_thanks.md\":\"2eb07de3\",\"index.md\":\"2324b28c\"}")</script>
    <script type="module" async src="/assets/app.8fc4a373.js"></script>
    
  </body>
</html>